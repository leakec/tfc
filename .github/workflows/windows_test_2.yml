name: Test for Windows wheels

on:
  workflow_dispatch:
  
jobs:
  build_binary_wheels:
    name: Build binary wheels on ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [windows-latest]
  
    steps:
      - name: Ingore file paths that Windows will complain about
        run: git config --global core.protectNTFS false

      - uses: actions/checkout@v3
      - uses: actions/setup-python@v3
  
      - name: Install cibuildwheel
        run: python -m pip install cibuildwheel
  
      - name: Build wheels
        run: python -m cibuildwheel --output-dir dist
  
      - name: Upload binary wheels
        uses: actions/upload-artifact@v3
        with:
          name: ${{ matrix.os }}_binary_wheels
          path: ./dist/*.whl
